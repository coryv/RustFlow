name: "Agent Test Workflow"
nodes:
  - id: "trigger"
    type: "manual_trigger"

  - id: "data"
    type: "set_data"
    config:
      data:
        bio: "I love coding in Rust and building scalable systems. It's challenging but rewarding."

  - id: "agent"
    type: "agent"
    config:
      model: "gpt-3.5-turbo"
      system_prompt: "You are a helpful assistant. Extract sentiment and keywords."
      user_prompt: "Analyze this bio: {{ bio }}"
      # Using stored credential ID (OpenAI)
      credential_id: "d4adce54-e092-4d7c-8ee8-d261e959b703"
      # api_key is removed, should be injected
      json_schema:
        type: "object"
        properties:
          sentiment: { type: "string" }
          keywords: { type: "array", items: { type: "string" } }
        required: ["sentiment", "keywords"]

  - id: "log"
    type: "console_output"

edges:
  - from: "trigger"
    to: "data"
  - from: "data"
    to: "agent"
  - from: "agent"
    to: "log"
