name: "Real World Test"
nodes:
  - id: "trigger"
    type: "manual_trigger"

  - id: "fetch_site"
    type: "http_request"
    config:
      method: "GET"
      url: "http://example.com"

  - id: "extract_title"
    type: "html_extract"
    config:
      selector: "h1"
      mode: "text"

  - id: "gemini_agent"
    type: "agent"
    config:
      provider: "gemini"
      model: "gemini-1.5-flash"
      system_prompt: "You are a helpful assistant."
      user_prompt: "Summarize this title: {{ input.extracted[0] }}"
      # api_key: "..." # Injected via env or credential

  - id: "notion_save"
    type: "notion_create_page"
    # Inputs come from stream: database_id, title, summary

edges:
  - from: "trigger"
    to: "fetch_site"
  - from: "fetch_site"
    to: "extract_title"
  - from: "extract_title"
    to: "gemini_agent"
  - from: "gemini_agent"
    to: "notion_save"
